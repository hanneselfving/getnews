from selenium import webdriver
from selenium.webdriver.common.by import By
import time
from datetime import datetime

# Function to save results to a text file with the current date and time
def save_results_to_file(results):
    now = datetime.now()
    current_time = now.strftime("%Y-%m-%d_%H-%M-%S")
    filename = f"flashback_threads_{current_time}.txt"
    with open(filename, "w", encoding="utf-8") as file:
        file.write("Top 5 Most Read Threads\n")
        file.write(f"Scraped at: {now}\n\n")
        for index, result in enumerate(results):
            file.write(f"Thread {index + 1}: {result['text']}\n")
    print(f"Results saved to {filename}")

# Set up the WebDriver (assuming Chrome)
driver = webdriver.Chrome()

# Load the Flashback 'Nya Ã„mnen' page
url = "https://www.flashback.org/nya-amnen"
driver.get(url)

# Wait for the page to load
time.sleep(2)  # Adjust the time if needed for the page to fully load

# Fetch all <tr> elements
rows = driver.find_elements(By.TAG_NAME, 'tr')

# Collect data
results = []
for row in rows:
    # Get all text within the <tr>
    row_text = row.text
    results.append({"text": row_text})

# Save results to a file
save_results_to_file(results)

# Close the driver
driver.quit()
